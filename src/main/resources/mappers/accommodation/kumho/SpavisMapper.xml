<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.stay.accommodation.kumho.mapper.SpavisMapper">
    <select id="couponList" resultType="String">
        SELECT ticketNo FROM ASAN_TICKET_CONDO
--         WHERE CONVERT(DATE,regdate) >= CONVERT(DATE,'2021-01-01')
--         AND strUseYn = 'N'
--         WHERE idx = 7768
        WHERE ticketNo LIKE 'S2022%'
    </select>

    <update id="updateStrNote" parameterType="String">
        UPDATE ASAN_TICKET_CONDO
        SET strNote = #{strNote},
            dateExpired = NULL,
            datePurchase = NULL
        WHERE ticketNo =  #{ticketNo}
    </update>

    <update id="updateCouponDates" parameterType="String">
        UPDATE ASAN_TICKET_CONDO
        SET datePurchase = #{datePurchase}
            , dateExpired = #{dateExpired}
        WHERE ticketNo =  #{ticketNo}
    </update>

</mapper>